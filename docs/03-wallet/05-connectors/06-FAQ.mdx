---
sidebar_label: FAQ
---

Below are frequently asked questions related to the integration of the Sequence wallet connector.

## NextJs

### Why does my wallet integration produce an error when used with next.js?

Wallet libraries and connectors must be rendered in the browser. Attempts to render the page elsewhere, such as on backend server, will therefore produce and error. That is because these libraries often depend on properties found in the `window` object which is only available in the browser.
By default, Next.js renders the web page's content on the server before sending it to the browser. In order to prevent an error, we must specify to Next.js that the wallet library's wrapper component must be rendered in the browser instead. The method for doing so will be different depending on the version of Next.js used.

The method for fixing this issue will depend on the folder structure. The `pages` folder structure is available for all versions of NextJs, while the `app` folder structure is only available for NextJs version 13 and above and may require being turned on through an experimental setting.

See using wallet libraries with [next.js pages directory](/wallet/connectors/FAQ#how-do-i-use-a-wallet-library-and-connector-with-nextjs-using-the-pages-directory-all-versions-of-nextjs)

See using wallet libraries with [next.js app directory(NextJs 13+ feature)](/wallet/connectors/FAQ#how-do-i-use-a-wallet-library-and-connector-with-nextjs-using-the-app-directory-version-13-and-above-only)


### How do I use a wallet library and connector with next.js using the `pages` directory (all versions of NextJs)?
We can use the [dynamic import feature](https://nextjs.org/docs/advanced-features/dynamic-import) from Next.js to import and render the wallet library in the browser. It is important to set the `ssr` option to false, which disables server-side rendering, for the integration to work properly.
The library wrapper component and all its connectors should be imported in such a way before being used. 

In the example below, we first create a wrapper component:
```js
const WagmiProvider = ({ children }) => {
  // ...rest of the component's code initializing all the connectors and setting the options

  return (
    <WagmiConfig client={wagmiClient}>
      {children}
    </WagmiConfig>
  );
}

export default WagmiProvider
```

We then import this component using dynamic import with the `ssr` option at false.

```js
import dynamic from 'next/dynamic'

// We import a custom wrapper component that initializes the wallet library and all its connectors, in this case Rainbowkit
// An example of the content of this wrapper component can be found here: https://github.com/0xsequence/demo-dapp-wagmi-next/blob/12/pages/WagmiProvider.tsx
const WagmiProvider = dynamic(() => import('./WagmiProvider'), {
  ssr: false
})

// We can then wrap our entire app with this browser's rendered component
function MyApp({ Component, pageProps }: AppProps) {
  return (
    <WagmiProvider>
      <Component {...pageProps} />
    </WagmiProvider>
  );
}
```

A full code example of this setup working with the Wagmi library can be found [on github](https://github.com/0xsequence/demo-dapp-wagmi-next/tree/12).

### How do I use a wallet library and connector with next.js using the `app` directory (version 13 and above only)?
NextJs 13 and above allows using a new folder structure in which the content is placed in an `app` directory. Enabling this feature may require explicitly indicating it with an experimental setting.
When using such a folder structure, NextJs allows the declaration of Client Components which are components that will be rendered in the browser.
A wrapper component containing the wallet library initialized with all the connectors must be declared with the `"use client"` directive. The `"use client"` directive is what will turn the wrapper component into a Client Component to be rendered in the browser.

In the example below, we first declare a wrapper Client Component:

```js
"use client" // this directive informs next.js that the component is a Client Component to be rendered in the browser

const WagmiWrapper = ({ children }) => {
  // ...rest of the component's code initializing all the connectors and setting the options

  return (
    <WagmiConfig client={wagmiClient}>
      {children}
    </WagmiConfig>
  );
}

export default WagmiWrapper
```

This wrapper component can then be imported normally and wrap the rest of the application. The child components can be a combination of Client and Server components.

```js
// We import a custom wrapper component that initializes the wallet library and all its connectors, in this case Rainbowkit
// An example of the content of this wrapper component can be found here: https://github.com/0xsequence/demo-dapp-wagmi-next/blob/master/components/WagmiProvider.tsx
import WagmiWrapper from './WagmiWrapper'

// We can then wrap our entire app with this browser's rendered component
function MyApp({ Component, pageProps }: AppProps) {
  return (
    <WagmiWrapper>
      <Component {...pageProps} />
    </WagmiWrapper>
  );
}
```

A full code example using Nextjs and the `app` directory can be found [on github](https://github.com/0xsequence/demo-dapp-wagmi-next)

Click [here](https://beta.nextjs.org/docs/rendering/server-and-client-components#client-components) for more information about Client Components.